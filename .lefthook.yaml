# yaml-language-server: $schema=https://raw.githubusercontent.com/evilmartians/lefthook/refs/tags/v1.10.2/schema.json
assert_lefthook_installed: true
commit-msg:
  commands:
    commitlint:
      run: grep -q "^fixup! " "{1}" || cog verify --file "{1}"
    trailers:
      run: git interpret-trailers --in-place --trailer "sign" --trim-empty "{1}"
pre-commit:
  piped: true
  jobs:
  - name: lint-task
    run: task -a -j > /dev/null
    glob: Taskfile.yaml
  - name: tidy
    run: task tidy
    glob: "{**/*.go,go.mod}"
    stage_fixed: true
  - name: fix
    run: task fix
    glob: "**/*.go"
    stage_fixed: true
  - name: lint
    run: task lint
pre-push:
  parallel: true
  jobs:
  - name: check-commits
    run: task lint:commits
  - name: build
    run: task build
    glob: "{**/*.go,go.mod,go.sum}"
  - name: test
    run: task test
    glob: "{**/*.go,go.mod,go.sum}"
skip_output:
- meta
# - summary
# - skips
